<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budgeting web application </title>
    <link rel="stylesheet" type="text/css" href="style.css">
    
  
</head>
<body>
  
<body>
  <h1 style="text-align: center;">BUDGETING WEB AAP</h1>

  <h3>Add Your Budget Here</h3>
  <input type="number" id="budgetInp" placeholder="What is Your Budget?">
  <button onclick="budgetAdd()">Set Your Budget</button>

  <h2>Add Expense</h2>
  <input type="text" id="descriptionInp" placeholder="Expense description">
  <input type="number" id="amountInp" placeholder="Your Expense amount?">
  <input type="date" id="dateInp">
  <button onclick="addExpense()"> Add Your Expenses</button>

  <h2>Budget and Expenses</h2>
  <p id="valbudget"></p>
  <table>
    <thead>
      <tr>
        <th>Description</th>
        <th>Amount (PKR) of the expense</th>
        <th>Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="tableExpense"></tbody>
  </table>

  <h2>Here is Your Remaining Budget</h2>
  <p id="budgetBaqaya"></p>

  <script>

var monthlyBudget = 0;
var expenses = [];

function budgetAdd() {
  var budgetInput = document.getElementById('budgetInp');
  monthlyBudget = parseInt(budgetInput.value);
  budgetInput.value = '';

  showBudget();
  calculateRemainingBudget();
}

function addExpense() {
  var descriptionInput = document.getElementById('descriptionInp');
  var amountInput = document.getElementById('amountInp');
  var dateInput = document.getElementById('dateInp');

  var expense = {
    description: descriptionInput.value,
    amount: parseFloat(amountInput.value),
    date: dateInput.value
  };

  expenses.push(expense);

  descriptionInput.value = '';
  amountInput.value = '';
  dateInput.value = '';

  showExpenses();
  calculateRemainingBudget();
}

function deleteExpense(index) {
  expenses.splice(index, 1);
  showExpenses();
  calculateRemainingBudget();
}

function showBudget() {
  var budgetValue = document.getElementById('valbudget');
  budgetValue.textContent = 'Your Budget: PKR ' + monthlyBudget;
}

function showExpenses() {
  var expensesTableBody = document.getElementById('tableExpense');
  expensesTableBody.innerHTML = '';

  expenses.forEach((expense, index) => {
    var line = document.createElement('tr');

    var descriptionCell = document.createElement('td');
    descriptionCell.textContent = expense.description;

    var amountCell = document.createElement('td');
    amountCell.textContent = expense.amount;

    var dateCell = document.createElement('td');
    dateCell.textContent = expense.date;

    var actionsCell = document.createElement('td');
    var deleteButton = document.createElement('button');
    deleteButton.textContent = 'Delete';
    deleteButton.onclick = function () {
      deleteExpense(index);
    };

    var editButton = document.createElement('button');
    editButton.textContent = 'Edit';
    editButton.onclick = function () {
      editExpense(index);
    };

    actionsCell.appendChild(deleteButton);
    actionsCell.appendChild(editButton);

    line.appendChild(descriptionCell);
    line.appendChild(amountCell);
    line.appendChild(dateCell);
    line.appendChild(actionsCell);

    expensesTableBody.appendChild(line);
  });
}

function editExpense(index) {
  var expense = expenses[index];

  var newDescription = prompt('Enter the new description:', expense.description);

  if (newDescription === null || newDescription === '') {
    alert('Please enter a valid description');
    return;
  }

  var newAmount = prompt('Enter the new amount:', expense.amount);

  if (newAmount === null || newAmount === '' || isNaN(newAmount)) {
    alert('Please enter a valid amount');
    return;
  }

  expense.description = newDescription;
  expense.amount = parseFloat(newAmount);

  showExpenses();
  calculateRemainingBudget();
}

function calculateRemainingBudget() {
  var remainingBudgetValue = document.getElementById('budgetBaqaya');
  var totalExpenses = expenses.reduce(function (total, expense) {
    return total + expense.amount;
  }, 0);
  var remainingBudget = monthlyBudget - totalExpenses;

  remainingBudgetValue.textContent = 'Your Remaining Budget: PKR ' + remainingBudget;

  if (remainingBudget < 0) {
    remainingBudgetValue.style.color = 'red';
  } else {
    remainingBudgetValue.style.color = 'green';
  }
}

  </script>


</body>
</body>
</html>